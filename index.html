<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>皇家維修熱線</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="皇家維修熱線">
<meta property="og:url" content="http://navoni1024.github.io/">
<meta property="og:site_name" content="皇家維修熱線">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="navoni1023">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="皇家維修熱線" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">皇家維修熱線</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">奇怪的人都在這裡</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="搜尋"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜尋"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://navoni1024.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-test" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/test/" class="article-date">
  <time class="dt-published" datetime="2023-07-15T16:20:28.000Z" itemprop="datePublished">2023-07-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/test/">-[test]</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/test/">星爆氣流斬</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>昨天介紹了dc的功能還有bot要怎麼申請，今天就可以來講他的基本架構了。</p>
<hr>
<p>首先先用一個最基本的機器人來示範。請打開一個python檔並鍵入以下內容:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from discord.ext import commands</span><br><span class="line"></span><br><span class="line">bot = commands.Bot(&#x27;%&#x27;)</span><br><span class="line"></span><br><span class="line">@bot.event</span><br><span class="line">async def on_ready():</span><br><span class="line">	print(&#x27;不客气！&#x27;)</span><br><span class="line">	print(&#x27;感谢您使用Discord产品, 欢迎您继续咨询Discord社区！&#x27;)</span><br><span class="line">	</span><br><span class="line">@bot.command(aliases=[&#x27;touch&#x27;])</span><br><span class="line">async def t(message):</span><br><span class="line">	await message.channel.send(&#x27;请不要随意地触碰我！ 十分感谢！&#x27;)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">	bot.run(&#x27;在這裡輸入您的token&#x27;)</span><br></pre></td></tr></table></figure>

<p>接下來分行解釋下。</p>
<hr>
<h4 id="bot-commands-bot-‘-’"><a href="#bot-commands-bot-‘-’" class="headerlink" title="bot &#x3D; commands.bot(‘%’)"></a>bot &#x3D; commands.bot(‘%’)</h4><p>造出一個bot的物件。而那個<code>&#39;%&#39;</code>就是呼叫機器人的前綴。<br>不一定要一個字，你要拿<code>&#39;peko&#39;</code>當前綴也是完全可以的。</p>
<p>小補充，如果你也想要用標記機器人來呼叫機器人的話可以這樣寫:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bot = commands.bot(commands.when_mentioned_or(&#x27;%&#x27;))</span><br></pre></td></tr></table></figure>
<p>效果會像這樣:<br><img src="https://ithelp.ithome.com.tw/upload/images/20221010/20152706nEGgzYWzSc.png" alt="https://ithelp.ithome.com.tw/upload/images/20221010/20152706nEGgzYWzSc.png"></p>
<p>bot裡面詳細有什麼功能可以看一下<a target="_blank" rel="noopener" href="https://discordpy.readthedocs.io/en/stable/ext/commands/api.html#bots">官方API的文件</a><br>看不懂也沒關係，後面會帶到一些常見的用法。</p>
<hr>
<h4 id="bot-event"><a href="#bot-event" class="headerlink" title="@bot.event"></a>@bot.event</h4><p>這個<code>@</code>叫<strong>decorator</strong>，是python的語法糖。<br>簡單來說這東西會把下面的函數丟到你@的函數裡面加工，詳細可以看一下<a target="_blank" rel="noopener" href="https://medium.com/citycoddee/python%E9%80%B2%E9%9A%8E%E6%8A%80%E5%B7%A7-3-%E7%A5%9E%E5%A5%87%E5%8F%88%E7%BE%8E%E5%A5%BD%E7%9A%84-decorator-%E5%97%B7%E5%97%9A-6559edc87bc0">這篇</a>。<br>官方API的解釋則在<a target="_blank" rel="noopener" href="https://discordpy.readthedocs.io/en/stable/ext/commands/api.html#decorators">這裡</a>。</p>
<p>看不懂也沒什麼關係，就當作一種固定語法。記得在你寫的函數前面加上對應的decorator就行。<br>像這邊就是因為要使用底下的<code>on_ready()</code>所以才會在上面加@bot.event的，可以看下<a target="_blank" rel="noopener" href="https://discordpy.readthedocs.io/en/stable/ext/commands/api.html#discord.ext.commands.Bot.event">官方API</a></p>
<p>另外如果點進去官方API的話可以發現他的例子是加了<code>@client.event</code>。<br>使用<code>discord.clinet</code>是另一種Discord機器人的寫法，client的語法基本上把<code>client</code>代換成<code>bot</code>都可用。<br>不過bot(<code>discord.ext.commands.Bot</code>)似乎功能比較多一點加上兩者不能混用所以我都用bot寫。<br>一言以蔽之，看到範例是用<code>clinet</code>就換成<code>bot</code>試試看吧。</p>
<hr>
<h4 id="async-def-on-ready"><a href="#async-def-on-ready" class="headerlink" title="async def on_ready():"></a>async def on_ready():</h4><p>這邊的<code>async</code>和<code>await</code>是python異步執行套件<code>asyncio</code>的語法。</p>
<p>不過這邊難的地方都寫在discord套件底層了，<br>所以我們只要記得在函數前面加async跟在discord提供的方法前加await就行。</p>
<p><code>on_ready()</code>這個方法，其功能是在機器人上線的那刻執行下列內容。<br>所以如果機器人成功運行了可以看到命令列有以下的輸出。<br><img src="https://ithelp.ithome.com.tw/upload/images/20221009/20152706Sv659LuuVk.png" alt="https://ithelp.ithome.com.tw/upload/images/20221009/20152706Sv659LuuVk.png"><br>這樣可以方便我們確定機器人是不是正常上線了。</p>
<hr>
<h4 id="bot-command-aliases-‘touch’"><a href="#bot-command-aliases-‘touch’" class="headerlink" title="@bot.command(aliases&#x3D;[‘touch’])"></a>@bot.command(aliases&#x3D;[‘touch’])</h4><p><code>@bot.command()</code>這個語法糖可以將下面的函數變成我們在頻道可以使用的指令。<br>預設指令名稱就是下面的函數名。以這個例子來說就是t</p>
<p>括號中間的<code>aliases=[&#39;touch&#39;]</code>則是為這個函數添加更多指令名的。<br>所以結合我們在上面的<code>bot = commands.bot(&#39;%&#39;)</code>設定的前綴，<br>機器人上線後我們用<code>%touch</code>和<code>%t</code>都可以叫出一樣的指令。</p>
<hr>
<h4 id="async-def-t-message"><a href="#async-def-t-message" class="headerlink" title="async def t(message):"></a>async def t(message):</h4><p>如上所述，函數名就是你在頻道打的指令名。</p>
<p>括號裡面的message基本上就是你在discord發的訊息。<br>但他不僅僅是文字，而是discord api一個’Message’類別的物件。</p>
<p>裡面的功能相當的豐富，可以從中取出相當多的資訊，下面會做說明。</p>
<hr>
<h4 id="await-message-channel-send-‘请不要随意地触碰我！-十分感谢！’"><a href="#await-message-channel-send-‘请不要随意地触碰我！-十分感谢！’" class="headerlink" title="await message.channel.send(‘请不要随意地触碰我！ 十分感谢！’)"></a>await message.channel.send(‘请不要随意地触碰我！ 十分感谢！’)</h4><p>像這邊我們就從中取出了你發送指令的頻道並在那頻道發送了訊息。<br>具體而言看起來像這樣。<br><img src="https://ithelp.ithome.com.tw/upload/images/20221009/20152706UMjauH0ZsL.png" alt="https://ithelp.ithome.com.tw/upload/images/20221009/20152706UMjauH0ZsL.png"></p>
<p>其他更多的用法一樣可以詳閱<a target="_blank" rel="noopener" href="https://discordpy.readthedocs.io/en/stable/api.html#discord.Message">官方API的公開說明書</a></p>
<hr>
<h4 id="if-name-“-main-“"><a href="#if-name-“-main-“" class="headerlink" title="if __name__ &#x3D;&#x3D; “__main__“:"></a>if __name__ &#x3D;&#x3D; “__main__“:</h4><p>這行就是確保你是直接執行了這檔案才會跑以下的指令。<br>bot.run()的括號中間輸入您昨天取得的token碼。</p>
<hr>
<p>接著就讓機器人上線並邀請你的機器人進自己的伺服器來玩玩吧。<br>也可以試著改一些設定，或甚至嘗試一些你在官方API找到的功能。<br>看不太懂上面和官方API到底在講什麼鬼的也沒關係，後面跟著做就會漸漸熟悉了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://navoni1024.github.io/test/" data-id="clkb5i2de0001owtn7jrn06yg" data-title="星爆氣流斬" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/exp/" rel="tag">-[exp]</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/hello-world/" class="article-date">
  <time class="dt-published" datetime="2023-07-15T07:36:54.078Z" itemprop="datePublished">2023-07-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://navoni1024.github.io/hello-world/" data-id="clkb5i2dw0008owtn83i02mnd" data-title="Hello World" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/test/">-[test]</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/exp/" rel="tag">-[exp]</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/exp/" style="font-size: 10px;">-[exp]</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">七月 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/test/">星爆氣流斬</a>
          </li>
        
          <li>
            <a href="/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 navoni1023<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>